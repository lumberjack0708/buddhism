// 佛法典籍資料
export const scripturesData = {
  "mahaPrajnaparamita": {
    id: "mahaPrajnaparamita",
    name: "大般若波羅蜜多經",
    description: "般若部重要經典",
    chapters: {
      "chapter1": {
        id: "chapter1",
        name: "第一章",
        description: "經文開始，敘述說法因緣",
        sections: [
          {
            id: "section1_1",
            title: "如是我聞",
            themes: [
              {
                id: "theme1_1_1",
                name: "佛法傳承的權威建立",
                outline: "探討「如是我聞」建立經典權威性的深層意義",
                keyPoints: "1. 「如是我聞」表示親聞佛說，確立經典的權威性\n2. 阿難尊者作為佛陀的侍者，具有第一手的可信度\n3. 此語句在佛經中的標準化意義\n4. 口傳文化中保持法義純正的重要性",
                transcript: "如是我聞：一時，佛在王舍城耆闍崛山中，與大比丘眾千二百五十人俱。此四字為佛經開端，表阿難親聞佛說，非臆測杜撰...",
                youtubeId: "dQw4w9WgXcQ"
              },
              {
                id: "theme1_1_2", 
                name: "德行深化的真義",
                outline: "解析法會時空背景所蘊含的修行意義",
                keyPoints: "1. 王舍城耆闍崛山是佛陀常住說法的聖地\n2. 千二百五十人代表固定的僧團規模\n3. 比丘眾的德行水準與法會品質的關係\n4. 時空因緣對法義傳達的重要影響",
                transcript: "王舍城者，摩揭陀國之都城也。耆闍崛山者，鷲峰山也，佛常居此說法。千二百五十人者，皆是大阿羅漢...",
                youtubeId: "dQw4w9WgXcQ"
              },
              {
                id: "theme1_1_3",
                name: "僧團和合的力量展現", 
                outline: "分析僧團和合對佛法弘傳的重要作用",
                keyPoints: "1. 僧團的六和敬精神\n2. 大眾齊集表示法緣殊勝\n3. 和合僧團是佛法住世的根本\n4. 集體修學的增上力量",
                transcript: "與大比丘眾千二百五十人俱。俱者，同時同處，和合共住之意。此表僧團和樂，為說法勝緣...",
                youtubeId: "dQw4w9WgXcQ"
              }
            ]
          },
          {
            id: "section1_2", 
            title: "菩薩摩訶薩眾",
            themes: [
              {
                id: "theme1_2_1",
                name: "菩薩道的境界層次",
                outline: "深入理解菩薩摩訶薩的修行境界",
                keyPoints: "1. 菩薩摩訶薩意為「大菩薩」，表示修行境界深厚\n2. 從初發心到等覺菩薩的修行階位\n3. 大乘菩薩道的特色與聲聞道的差異\n4. 菩薩的願力與慈悲心的展現",
                transcript: "復有菩薩摩訶薩眾，摩訶薩者，大菩薩也。謂修行已久，德高望重，為諸菩薩中之上首...",
                youtubeId: "dQw4w9WgXcQ"
              },
              {
                id: "theme1_2_2",
                name: "智慧與慈悲的圓融", 
                outline: "探討諸大菩薩所代表的德行特質",
                keyPoints: "1. 文殊師利菩薩代表智慧，般若法門的主要宣說者\n2. 觀世音菩薩代表慈悲，救度眾生的典範\n3. 彌勒菩薩代表慈心，未來佛的象徵\n4. 智慧與慈悲如何在修行中並重發展",
                transcript: "其名曰：彌勒菩薩、文殊師利菩薩、觀世音菩薩、普賢菩薩等。此諸菩薩，皆是一生補處...",
                youtubeId: "dQw4w9WgXcQ"
              },
              {
                id: "theme1_2_3",
                name: "法會證明的殊勝意義",
                outline: "分析諸大菩薩出席對法會品質的提升作用", 
                keyPoints: "1. 這些菩薩的出席顯示法會的殊勝\n2. 不同菩薩代表不同的修行面向\n3. 菩薩眾的護持對法義傳承的重要性\n4. 聖賢雲集的法會因緣難得可貴",
                transcript: "如是等菩薩摩訶薩八萬四千人，皆是阿惟越致，從諸佛國來至於此...",
                youtubeId: "dQw4w9WgXcQ"
              }
            ]
          }
        ]
      },
      "chapter2": {
        id: "chapter2", 
        name: "第二章",
        description: "講述觀照般若的修學方法",
        sections: [
          {
            id: "section2_1",
            title: "舍利子問般若",
            theme: "智慧修學的入門方法",
            outline: "舍利子向佛陀請法關於般若波羅蜜多",
            keyPoints: "1. 舍利子是智慧第一的弟子，代表聲聞乘的最高智慧\n2. 「甚深般若波羅蜜多」指向究竟的空性智慧\n3. 「當如何學」體現了修學方法的重要性\n4. 此問開啟了般若法門的深入探討",
            transcript: "爾時，慧命舍利子白佛言：「世尊！若善男子、善女人，欲學甚深般若波羅蜜多者，當如何學？」",
            youtubeId: "dQw4w9WgXcQ"
          }
        ]
      }
    }
  },
  "diamondSutra": {
    id: "diamondSutra",
    name: "金剛般若波羅蜜經",
    description: "般若系經典中最著名的經典之一",
    chapters: {
      "chapter1": {
        id: "chapter1",
        name: "法會因由分第一",
        description: "敘述法會的因緣",
        sections: [
          {
            id: "section1_1",
            title: "如是我聞",
            theme: "金剛法會的殊勝因緣",
            outline: "經典開始，說明法會因緣",
            keyPoints: "1. 舍衛國祇樹給孤獨園是著名的說法道場\n2. 給孤獨長者布金買地供養佛陀的典故\n3. 千二百五十人是佛陀的常隨弟子\n4. 此處為金剛經說法的殊勝因緣",
            transcript: "如是我聞：一時，佛在舍衛國祇樹給孤獨園，與大比丘眾千二百五十人俱...",
            youtubeId: "dQw4w9WgXcQ"
          }
        ]
      },
      "chapter2": {
        id: "chapter2",
        name: "善現啟請分第二", 
        description: "須菩提向佛請法",
        sections: [
          {
            id: "section2_1",
            title: "須菩提請法",
            theme: "菩提心安住與降伏之道",
            outline: "須菩提請問如何安住菩提心",
            keyPoints: "1. 須菩提是解空第一的弟子，最適合問般若法門\n2. 「偏袒右肩，右膝著地」是比丘請法的標準儀軌\n3. 「善男子、善女人」包含了在家與出家眾\n4. 「云何應住」問的是菩提心的安住方法\n5. 「云何降伏其心」問的是煩惱心的對治",
            transcript: "時，長老須菩提在大眾中即從座起，偏袒右肩，右膝著地，合掌恭敬而白佛言...",
            youtubeId: "dQw4w9WgXcQ"
          }
        ]
      }
    }
  },
  "heartSutra": {
    id: "heartSutra", 
    name: "般若波羅蜜多心經",
    description: "般若經典的精髓濃縮",
    chapters: {
      "chapter1": {
        id: "chapter1",
        name: "觀自在菩薩",
        description: "心經全文",
        sections: [
          {
            id: "section1_1",
            title: "觀照五蘊皆空",
            theme: "空性智慧的究竟體證",
            outline: "觀自在菩薩深般若時，照見五蘊皆空",
            keyPoints: "1. 觀自在菩薩即觀世音菩薩，代表慈悲與智慧的圓滿\n2. 「行深般若波羅蜜多」指深入修習般若智慧\n3. 五蘊指色、受、想、行、識，涵蓋一切身心現象\n4. 「皆空」不是沒有，而是無自性、無實體\n5. 「度一切苦厄」表示空性智慧能解脫一切痛苦",
            transcript: "觀自在菩薩，行深般若波羅蜜多時，照見五蘊皆空，度一切苦厄...",
            youtubeId: "dQw4w9WgXcQ"
          },
          {
            id: "section1_2",
            title: "般若波羅蜜多咒",
            theme: "神咒功德與彼岸超越",
            outline: "心經咒語的功德", 
            keyPoints: "1. 「大神咒」表示具有不可思議的神力\n2. 「大明咒」表示能破除無明黑暗\n3. 「無上咒」表示至高無上，無法超越\n4. 「無等等咒」表示無可比擬，獨一無二\n5. 咒語的真實義即是般若智慧本身\n6. 「揭諦揭諦」意為去啊去啊，從此岸到彼岸",
            transcript: "故知般若波羅蜜多，是大神咒，是大明咒，是無上咒，是無等等咒...",
            youtubeId: "dQw4w9WgXcQ"
          }
        ]
      }
    }
  }
};

// 取得所有典籍列表
export const getScripturesList = () => {
  return Object.values(scripturesData).map(scripture => ({
    value: scripture.id,
    label: scripture.name,
    description: scripture.description
  }));
};

// 根據典籍ID取得章節列表
export const getChaptersList = (scriptureId) => {
  const scripture = scripturesData[scriptureId];
  if (!scripture) return [];
  
  return Object.values(scripture.chapters).map(chapter => ({
    id: chapter.id,
    name: chapter.name,
    description: chapter.description
  }));
};

// 根據典籍ID和章節ID取得章節內容
export const getChapterContent = (scriptureId, chapterId) => {
  const scripture = scripturesData[scriptureId];
  if (!scripture || !scripture.chapters[chapterId]) return null;
  
  return scripture.chapters[chapterId];
};

// 搜尋經文內容（transcript層級）
export const searchScriptures = (keyword) => {
  if (!keyword) return [];
  
  const results = [];
  const lowerKeyword = keyword.toLowerCase();
  
  Object.values(scripturesData).forEach(scripture => {
    Object.values(scripture.chapters).forEach(chapter => {
      chapter.sections.forEach(section => {
        // 搜尋 transcript 內容
        if (section.transcript.toLowerCase().includes(lowerKeyword)) {
          results.push({
            scriptureId: scripture.id,
            scriptureName: scripture.name,
            chapterId: chapter.id,
            chapterName: chapter.name,
            sectionId: section.id,
            sectionTitle: section.title,
            transcript: section.transcript,
            // 高亮關鍵字
            highlightedTranscript: section.transcript.replace(
              new RegExp(`(${keyword})`, 'gi'),
              '<mark>$1</mark>'
            )
          });
        }
        
        // 也搜尋小節標題和綱要作為補充
        if (section.title.toLowerCase().includes(lowerKeyword) || 
            section.outline.toLowerCase().includes(lowerKeyword)) {
          // 避免重複添加
          const exists = results.some(r => 
            r.scriptureId === scripture.id && 
            r.chapterId === chapter.id && 
            r.sectionId === section.id
          );
          
          if (!exists) {
            results.push({
              scriptureId: scripture.id,
              scriptureName: scripture.name,
              chapterId: chapter.id,
              chapterName: chapter.name,
              sectionId: section.id,
              sectionTitle: section.title,
              transcript: section.transcript,
              highlightedTranscript: section.transcript
            });
          }
        }
      });
    });
  });
  
  return results;
}; 